<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>防災行動マップ</title>
  
  <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header id="global-header">
    <div class="header-left">
      <div class="header-logo-icon">🗺️</div>
      <div class="header-titles">
        <h1 class="header-main-title">防災行動マップ</h1>
      </div>
    </div>

    <div class="header-right">
      <div class="status-item">鑑賞済み <span id="view-count"></span></div>
      <div class="status-item">💖 <span id="header-heart-count">0</span></div>
      <div class="status-item">✨ <span id="header-action-count">0</span></div>
      
      <button id="header-help-btn">？</button>
    </div>
  </header>

  <div class="main-container">
    
    <div id="sidebar">
      
      <div id="sidebar-filter">
        
        <div class="filter-main-header">
          <span>🔍 絞り込み</span>
          <span class="toggle-icon">﹀</span>
        </div>

        <div class="filter-content">
          <div class="filter-group">
            <div class="filter-label">ハザード種別</div>
            <div class="filter-chips">
              <button class="chip active" data-cat="all">すべて</button>
              <button class="chip" data-cat="mizu">水害</button>
              <button class="chip" data-cat="jiban">地盤</button>
              <button class="chip" data-cat="jishin">地震</button>
            </div>
            
            <button id="open-hazard-btn" class="hazard-overlay-btn">
               🗺️ ハザードマップを重ねる
            </button>
          </div>

          <div class="filter-group">
            <div class="filter-label">行動フェーズ</div>
            <div class="filter-chips phase-chips">
              <button class="chip phase-chip active" data-phase="all">すべて</button>
              <button class="chip phase-chip" data-phase="prior">事前</button>
              <button class="chip phase-chip" data-phase="during">災害時</button>
              <button class="chip phase-chip" data-phase="recovery">復旧時</button>
            </div>
          </div>

          <div class="filter-group">
            <div class="filter-label">お気に入り（作品鑑賞時に登録できます）</div>
            <div class="fav-buttons-row">
              <button id="filter-heart-btn" class="fav-filter-btn">♡ 共感した</button>
              <button id="filter-action-btn" class="fav-filter-btn">✨ 実践したい</button>
            </div>
          </div>
        </div>
      </div> 

      <div id="art-list-container">
        </div>
      
    </div> <div id="map-area">
      <div id="viewDiv"></div>

      <button id="search-area-btn" class="search-area-btn" style="display:none;">
        このエリアで再検索
      </button>

      <button id="menu-btn">
        <span style="font-size:1.2em;">≡</span> 防災情報
      </button>
  
      <div id="bottom-left-controls">
        <div class="control-group">
          <div class="basemap-buttons-container">
            <button id="2d-btn" class="basemap-btn active">2D</button>
            <button id="3d-btn" class="basemap-btn">3D</button>
          </div>
        </div>
        <div class="control-group">
          <div class="basemap-buttons-container">
            <button id="white-map-btn" class="basemap-btn active">白地図</button>
            <button id="satellite-btn" class="basemap-btn">衛星</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="control-panel" style="display:none;">
    <button id="close-panel-btn" class="close-btn">×</button>

    <div class="tab-buttons">
      <button id="hazard-tab" class="tab-button active">ハザードマップ</button>
      <button id="resource-tab" class="tab-button">防災資源</button>
    </div>
    
    <div id="hazard-content" class="tab-content">
      
      <div id="group-mizu" class="hazard-group">
        <div class="hazard-group-header">水害</div>
        <div class="hazard-group-content">
          <div class="filter-option" data-layer-title="gaisui_clip">
            <span><input type="checkbox" id="gaisui-filter"><label for="gaisui-filter">川の水があふれる洪水（外水氾濫）</label></span>
          </div>
          <div class="filter-option" data-layer-title="naisui_R7_clip">
            <span><input type="checkbox" id="naisui_R7-filter"><label for="naisui_R7-filter">下水があふれる洪水（内水氾濫）</label></span>
          </div>
          <div class="filter-option" data-layer-title="takashio_clip">
            <span><input type="checkbox" id="takashio-filter"><label for="takashio-filter">高潮（浸水深）</label></span>
          </div>
          <div class="filter-option" data-layer-title="tsunami_clip">
            <span><input type="checkbox" id="tsunami-filter"><label for="tsunami-filter">津波（浸水深、慶長型地震）</label></span>
          </div>
        </div>
      </div>

      <div id="group-jiban" class="hazard-group">
        <div class="hazard-group-header">地盤</div>
        <div class="hazard-group-content">
          <div class="filter-option" data-layer-title="kyukeisha_R7_clip">
            <span><input type="checkbox" id="kyukeisha_R7-filter"><label for="kyukeisha_R7-filter">土砂災害</label></span>
          </div>
          <div class="filter-option" data-layer-title="ekijyouka_clip">
            <span><input type="checkbox" id="ekijyouka-filter"><label for="ekijyouka-filter">地盤の液状化（元禄型関東地震）</label></span>
          </div>
        </div>
      </div>

      <div id="group-jishin" class="hazard-group">
        <div class="hazard-group-header">地震</div>
        <div class="hazard-group-content">
           <div class="filter-option" data-layer-title="jishindo_clip">
            <span><input type="checkbox" id="jishindo-filter"><label for="jishindo-filter">震度情報（元禄型関東地震）</label></span>
          </div>
          <div class="filter-option" data-layer-title="shoshitsu_clip">
            <span><input type="checkbox" id="shoshitsu-filter"><label for="shoshitsu-filter">地震火災（元禄型関東地震）</label></span>
          </div>
        </div>
      </div>
      
      <hr style="margin: 20px 0; border: 0; border-top: 1px solid #ccc;">
      <div id="legend-container"></div>
    </div>

    <div id="resource-content" class="tab-content" style="display: none;">
      <div id="resource-filters">
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="TIIKIBOSAIKYOTEN-filter"><label for="TIIKIBOSAIKYOTEN-filter">地域防災拠点</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="koen-point-filter"><label for="koen-point-filter">公園</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="toilet-filter"><label for="toilet-filter">公衆トイレ</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="hamakkotoilet-filter"><label for="hamakkotoilet-filter">災害用ハマッコトイレ</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="syouboukigu-filter"><label for="syouboukigu-filter">消防団器具置き場</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="douro12-filter"><label for="douro12-filter">避難に適する道路（幅12m以上）</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="douro4-filter"><label for="douro4-filter">避難に適さない道路（幅4m程度）</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="yusouro-filter"><label for="yusouro-filter">緊急輸送路</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="suibu-filter"><label for="suibu-filter">水部</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="kinkyu_kyusuisen-filter"><label for="kinkyu_kyusuisen-filter">緊急給水栓</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="taishin_kyusuisen-filter"><label for="taishin_kyusuisen-filter">耐震給水栓</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="kyusuitank-filter"><label for="kyusuitank-filter">災害用地下給水タンク</label></div></div>
        <div class="filter-option"><div class="symbol-and-label"><input type="checkbox" id="haisuisou-filter"><label for="haisuisou-filter">配水池・配水槽</label></div></div>
      </div>
    </div>
    
  </div>

  <script src="https://js.arcgis.com/4.29/"></script>
  <script src="script.js"></script>

  <div id="tutorial-overlay" class="tutorial-overlay" style="display: none;">
    <div class="tutorial-card">
      
      <div class="tutorial-image-container">
        <img id="tutorial-img" src="" alt="説明画像" class="tutorial-img">
      </div>

      <div class="tutorial-content">
        <h3 id="tutorial-title">タイトル</h3>
        <p id="tutorial-desc">説明文がここに入ります。</p>
      </div>

      <div class="tutorial-footer">
        <button id="skip-btn" class="tutorial-nav-btn secondary">スキップ</button>
        <div class="tutorial-dots">
          <span class="dot active"></span>
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
        <button id="next-btn" class="tutorial-nav-btn primary">次へ ＞</button>
      </div>

    </div>
  </div>
  <script src="https://js.arcgis.com/4.29/"></script>
  <script src="script.js"></script>
</body>
</html>
